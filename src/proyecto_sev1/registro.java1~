/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * registro.java
 *
 * Created on 28-may-2011, 16:08:54
 */

package proyecto_sev1;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.Observable;
import java.util.Observer;
import java.util.StringTokenizer;
import javax.swing.JOptionPane;

/**
 *
 * @author manabi
 */
public class registro extends JFrameConFondo {


    /** Creates new form registro */
    public registro() {
        initComponents();


        setImagen("Recursos/SEVM.jpg");
        Reloj modelo=new Reloj();
                modelo.addObserver (new Observer()
                 {
                     public void update (Observable unObservable, Object dato)
                     {
                         jLabel3.setText(""+dato);

                     }
                 });


    }
   
    private boolean existeRegistro(){
        boolean existe = false;
        buscar busca = new buscar("cedulas.txt");
        String dato = busca.BuscarDatos(jTextField1.getText().toString());
        if(dato.equals(""))
            existe = false;
        else
            existe = true;

        return existe;
    }
   private boolean listo(){
        boolean ok = false;

        if(jTextField1.getText().toString().equals("") )
            ok = false;
        else
            ok = true;

        return ok;
    }
     private boolean existeRegistro1(){
        boolean existe = false;  
        buscar busca = new buscar("Compararcedula.txt");
        String dato = busca.BuscarDatos(jTextField1.getText().toString());
        if(dato.equals(""))
            existe = false;
        else
            existe = true;

        return existe;
    }
   private boolean listo1(){
        boolean ok = false;
        
        if(jTextField1.getText().toString().equals("") )
            ok = false;
        else
            ok = true;
        
        return ok;
    }



    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 12));
        jLabel1.setForeground(new java.awt.Color(51, 0, 102));
        jLabel1.setText("INGRESE SU NUMERO DE CEDULA PARA CONTINUAR");
        jLabel1.setName("jLabel1"); // NOI18N

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(102, 0, 102));
        jLabel2.setText("C.I.:");
        jLabel2.setName("jLabel2"); // NOI18N

        jTextField1.setForeground(new java.awt.Color(102, 0, 102));
        jTextField1.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(51, 0, 102)));
        jTextField1.setName("jTextField1"); // NOI18N
        jTextField1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField1KeyPressed(evt);
            }
        });

        jButton1.setFont(new java.awt.Font("Tahoma", 1, 12));
        jButton1.setForeground(new java.awt.Color(51, 0, 102));
        jButton1.setText("REGISTRAR");
        jButton1.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(51, 0, 102)));
        jButton1.setName("jButton1"); // NOI18N
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton1MouseClicked(evt);
            }
        });
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setFont(new java.awt.Font("Tahoma", 1, 12));
        jButton2.setForeground(new java.awt.Color(51, 0, 102));
        jButton2.setText("ATRAS");
        jButton2.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(51, 0, 102)));
        jButton2.setName("jButton2"); // NOI18N
        jButton2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton2MouseClicked(evt);
            }
        });

        jButton3.setFont(new java.awt.Font("Tahoma", 1, 12));
        jButton3.setForeground(new java.awt.Color(51, 0, 102));
        jButton3.setText("SALIR");
        jButton3.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(51, 0, 102)));
        jButton3.setName("jButton3"); // NOI18N
        jButton3.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton3MouseClicked(evt);
            }
        });
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jLabel3.setFont(new java.awt.Font("Comic Sans MS", 1, 12)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(102, 0, 102));
        jLabel3.setName("jLabel3"); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(66, 66, 66)
                        .addComponent(jLabel2)
                        .addGap(18, 18, 18)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButton2)
                        .addGap(18, 18, 18)
                        .addComponent(jButton3)))
                .addContainerGap())
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(76, Short.MAX_VALUE)
                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 196, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(62, 62, 62))
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton1, jButton2, jButton3});

        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(28, 28, 28)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 35, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(30, 30, 30)
                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 17, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2)
                    .addComponent(jButton3))
                .addGap(33, 33, 33))
        );

        layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {jButton1, jButton2, jButton3});

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton2MouseClicked
        // TODO add your handling code here:
        votantes ir = new  votantes();// crea objeto para ir a nueva ventana
        this.setVisible(false);//oculta la ventana actual
        ir.setVisible(true);//muestra la nueva ventana
        ir.setLocationRelativeTo(null);// para que la ventana este siempre centrada
    }//GEN-LAST:event_jButton2MouseClicked

    private void jButton3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton3MouseClicked
        // TODO add your handling code here:
        NewJFrame ir = new  NewJFrame();// crea objeto para ir a nueva ventana
        this.setVisible(false);//oculta la ventana actual
        ir.setVisible(true);//muestra la nueva ventana
        ir.setLocationRelativeTo(null);// para que la ventana este siempre centrada
    }//GEN-LAST:event_jButton3MouseClicked

    private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton1MouseClicked
        // TODO add your handling code here:
        String numcedula = jTextField1.getText();//captura el numero de CI
        //codigo verificar que ingrese solo 10 digitos
        if(numcedula.length()<10)
        {
            JOptionPane.showMessageDialog(null,"NUMERO DE CEDULA INCOMPLETO");
            jTextField1.setText("");
         }
        if(numcedula.length()>10)
        {
            JOptionPane.showMessageDialog(null,"HA EXCEDIDO EL NUMERO DE DIGITOS ");
            jTextField1.setText("");
        }
        // codigo para verificar si el numero de CI es valido
        if(numcedula.length()==10)
        {
            try{
                if(listo()==true)
                {
                    if(existeRegistro()!=false)
                    {
                        if(existeRegistro1()==false)
                        {
                                File entrada = new File("Compararcedula.txt");
                                FileWriter fw = new FileWriter(entrada,true);
                                PrintWriter pw = new PrintWriter(fw);
                                pw.println(numcedula);
                                pw.close();
                                papeleta_presidente ir = new  papeleta_presidente();// crea objeto para ir a nueva ventana
                                this.setVisible(false);//oculta la ventana actual
                                ir.setVisible(true);//muestra la nueva ventana
                                ir.setLocationRelativeTo(null);// para que la ventana este siempre centrada

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null,"USTED YA VOTO","* * *   ALTO   * * *",2);
                            votantes ir = new    votantes();// crea objeto para ir a nueva ventana
                            this.setVisible(false);//oculta la ventana actual
                            ir.setVisible(true);//muestra la nueva ventana
                            ir.setLocationRelativeTo(null);// para que la ventana este siempre centrada
                        }
                    }else{
                    JOptionPane.showMessageDialog(null,"CEDULA INCORRECTA O NO ESTA EMPADRONADO","           * * *   ERROR   * * *",2);jTextField1.setText("");}
                } 
                else
                    JOptionPane.showMessageDialog(null,"CEDULA INCORRECTA O NO ESTA EMPADRONADO","* * *   ERROR   * * *",2);
            } catch(Exception e){
               
         }
      }
    }//GEN-LAST:event_jButton1MouseClicked

    private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField1KeyPressed
        // TODO add your handling code here:
        String str=jTextField1.getText();
	boolean resultado=str.startsWith("-");
         if(resultado==true){
              JOptionPane.showMessageDialog(null, "Ingrese una cantidad valida");
              jTextField1.setText("");
         }

      if(!jTextField1.getText().equals(""))
try{
         int  ci=Integer.parseInt(jTextField1.getText());
  }catch(NumberFormatException e){
             JOptionPane.showMessageDialog(null, "Solo se pueden ingresar numeros");
             jTextField1.setText("");
         }
    }//GEN-LAST:event_jTextField1KeyPressed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton3ActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton1ActionPerformed

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new registro().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables

}
